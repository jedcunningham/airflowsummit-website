{{ define "main" }}

{{ $data := index .Site.Data .Site.Language.Lang }}

<section class="session-single section">
  <div class="container">
      <h2>{{ .Title }}</h2>
      {{ if .Params.speakers }}
        <div>
        Speaker(s):
        <span class="speakers-list">
        {{ range .Params.speakers }}
          {{ with $.Site.GetPage "taxonomyTerm" (printf "speakers/%s" (urlize .)) }}
          <span><a href="{{ .Permalink }}">{{ .Title }}</a></span>
          {{ end }}
        {{ end }}
        </span>
      </div>
      {{ end }}
      {{ if .Params.tracks }}
        <div>
        Track:
        {{ range .Params.tracks }}
          {{ with $.Site.GetPage "taxonomyTerm" (printf "tracks/%s" (urlize .)) }}
          <a href="{{ .Permalink }}">{{ .Title }}</a>
          {{ end }}
        {{ end }}
        </div>
      {{ end }}
      <div>
      {{ $time_start := .Params.time_start | time  }}
      {{ $time_end := .Params.time_end | time  }}
      When: {{ $time_start.Format "Monday, January 2 15:04 MST" }} <em><span id="adjTime"></span></em>
      <script>
        let parseDate = Date.parse({{ $time_start.Format "02 Jan 2006 15:04:05 MST" }});
        let jsDate = new Date(parseDate);
        let adjString = "("+jsDate.getHours()+":"+(('0'+jsDate.getMinutes()).slice(-2))+" "+Intl.DateTimeFormat().resolvedOptions().timeZone+")";
        document.getElementById("adjTime").innerHTML=adjString;
      </script>
      </div>
      <div class="content mt-2">{{ .Content }}</div>
      {{ with .Params.video }}
        <iframe id="video-iframe" width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0" 
        allowtransparency="true" src="{{ . }}?navlinks=false&embed=true" 
        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true" 
        webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
      {{ end }}  
      {{ with .Params.slides }}
      <iframe id="slides-iframe" width="100%" height="500" frameborder="0" marginheight="0" marginwidth="0" allowtransparency="true" src="{{ . }}" 
      allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
    {{ end }}

  </div>
</section>

{{ end }}